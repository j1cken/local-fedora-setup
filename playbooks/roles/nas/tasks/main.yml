---
- name: install basic glusterfs packages
  dnf: name={{ item }} state=present
  with_items:
    - glusterfs
    - glusterfs-server

- name: open glusterfs client tcp firewall ports
  firewalld:
    permanent: yes
    immediate: yes
    port: 24007-24008/tcp
    state: enabled

- name: open glusterfs client udp firewall ports
  firewalld:
    permanent: yes
    immediate: yes
    port: 24007-24008/udp
    state: enabled

- name: open brick tcp firewall ports
  firewalld:
    permanent: yes
    immediate: yes
    port: 49152-49159/tcp
    state: enabled

- name: open brick udp firewall ports
  firewalld:
    permanent: yes
    immediate: yes
    port: 49152-49159/udp
    state: enabled

- name: open wol firewall port
  firewalld:
    permanent: yes
    immediate: yes
    port: 40000/udp
    state: enabled

- name: enable wake on lan
  lineinfile:
    path: /etc/sysconfig/network-scripts/ifcfg-enp6s0
    regexp: '^ETHTOOL_OPTIONS=.*$'
    line: 'ETHTOOL_OPTIONS="wol g"'
    backup: yes
   
